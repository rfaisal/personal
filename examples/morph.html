<!doctype html>
<html>
  <head>
    <title>Example of morphing a shape</title>
  </head>
  <body>
    <script type="text/javascript" src="../third-party/tween.js"></script>
    <script type="text/javascript" src="../third-party/three.js"></script>
    <script type="text/javascript" src="../third-party/underscore.js"></script>
    <script type="text/javascript" src="../src/two.js"></script>
    <script type="text/javascript">

      (function() {

        var two = new Two({ fullscreen: true }).appendTo(document.body);

        var amount = 6, radius = 150;
        var points = _.map(_.range(amount), function(i) {
          var pct = (i / amount) * Math.PI * 2;
          var x = radius * Math.cos(pct);
          var y = radius * Math.sin(pct);
          return new Two.Vector(x, y);
        });

        var polygon = two.makePolygon(points).fill(1, 0.3, 0.3);
        var curve = two.makeCurve(points).fill(0.3, 0.0, 1.0);

        points = _.map(polygon.getVertices(), function(p, i) {
          var pct = (i / amount) * Math.PI * 2;
          var x = (radius + Math.random() * radius) * Math.cos(pct);
          var y = (radius + Math.random() * radius) * Math.sin(pct);
          return new Two.Vector(x, y);
        });

        var m1 = polygon.makeMorph(points);
        var m2 = curve.makeMorph(points);

        two
          .onResize(function() {

            polygon.translate(two.width * 0.25, two.height / 2);
            curve.translate(two.width * 0.75, two.height / 2);

          })
          .draw(function(frameCount) {

            // Something to do on update
            var t = Math.abs(Math.sin(frameCount / 25));

            m1.influence(t);
            m2.influence(t);


          }).play();

          polygon.translate(two.width * 0.25, two.height / 2);
          curve.translate(two.width * 0.75, two.height / 2);

      })();

    </script>
  </body>
</html>