<!doctype html>
<html>
  <head>
    <title>Example of morphing a shape</title>
  </head>
  <body>
    <script type="text/javascript" src="../third-party/tween.js"></script>
    <script type="text/javascript" src="../third-party/three.js"></script>
    <script type="text/javascript" src="../third-party/underscore.js"></script>
    <script type="text/javascript" src="../src/two.js"></script>
    <script type="text/javascript">

      (function() {

        var two = new Two({ fullscreen: true }).appendTo(document.body);

        var x = 300;
        var y = 200;
        var r = 50;

        var circle = two.makeCircle(x, y, r).fill(255, 0, 0);

        var vertices = circle.getVertices();
        var length = vertices.length;

        _.each(vertices, function(v, i) {

          var dx = v.x;
          var dy = v.y;
          var theta = Math.atan2(dy, dx);
          var radius = 100;

          v.x = radius * Math.cos(theta);
          v.y = i < length / 2 ? - (radius - 1) * Math.sin(theta) : radius * Math.sin(theta);

        });

        var m1 = circle.makeMorph(vertices);
        var crescent = two.makePolygon(vertices).fill(255, 0, 0).translate(x * 2, y);

        var v = circle.getVertices();
        var m2 = crescent.makeMorph(v);

        // m2.influence(0.66);

        two.draw(function(time) {

          // Something to do on update
          // m1.influence(Math.abs(Math.cos(time / 50)));
          m2.influence(Math.abs(Math.cos(time / 50)));

        }).play();

      })();

    </script>
  </body>
</html>