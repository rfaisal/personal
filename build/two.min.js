(function(){function q(a,g,h){if(a===g)return 0!==a||1/a==1/g;if(null==a||null==g)return a===g;a._chain&&(a=a._wrapped);g._chain&&(g=g._wrapped);if(a.isEqual&&c.isFunction(a.isEqual))return a.isEqual(g);if(g.isEqual&&c.isFunction(g.isEqual))return g.isEqual(a);var n=b.call(a);if(n!=b.call(g))return!1;switch(n){case "[object String]":return a==String(g);case "[object Number]":return a!=+a?g!=+g:0==a?1/a==1/g:a==+g;case "[object Date]":case "[object Boolean]":return+a==+g;case "[object RegExp]":return a.source==
g.source&&a.global==g.global&&a.multiline==g.multiline&&a.ignoreCase==g.ignoreCase}if("object"!=typeof a||"object"!=typeof g)return!1;for(var C=h.length;C--;)if(h[C]==a)return!0;h.push(a);var C=0,d=!0;if("[object Array]"==n){if(C=a.length,d=C==g.length)for(;C--&&(d=C in a==C in g&&q(a[C],g[C],h)););}else{if("constructor"in a!="constructor"in g||a.constructor!=g.constructor)return!1;for(var k in a)if(c.has(a,k)&&(C++,!(d=c.has(g,k)&&q(a[k],g[k],h))))break;if(d){for(k in g)if(c.has(g,k)&&!C--)break;
d=!C}}h.pop();return d}var e=this,j=e._,w={},p=Array.prototype,r=Object.prototype,f=p.slice,d=p.unshift,b=r.toString,l=r.hasOwnProperty,s=p.forEach,m=p.map,t=p.reduce,k=p.reduceRight,D=p.filter,x=p.every,B=p.some,I=p.indexOf,L=p.lastIndexOf,r=Array.isArray,M=Object.keys,v=Function.prototype.bind,c=function(a){return new F(a)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=c),exports._=c):e._=c;c.VERSION="1.3.3";var u=c.each=c.forEach=function(a,
g,h){if(null!=a)if(s&&a.forEach===s)a.forEach(g,h);else if(a.length===+a.length)for(var n=0,b=a.length;n<b&&!(n in a&&g.call(h,a[n],n,a)===w);n++);else for(n in a)if(c.has(a,n)&&g.call(h,a[n],n,a)===w)break};c.map=c.collect=function(a,g,c){var n=[];if(null==a)return n;if(m&&a.map===m)return a.map(g,c);u(a,function(a,b,d){n[n.length]=g.call(c,a,b,d)});a.length===+a.length&&(n.length=a.length);return n};c.reduce=c.foldl=c.inject=function(a,g,h,n){var b=2<arguments.length;null==a&&(a=[]);if(t&&a.reduce===
t)return n&&(g=c.bind(g,n)),b?a.reduce(g,h):a.reduce(g);u(a,function(a,c,d){b?h=g.call(n,h,a,c,d):(h=a,b=!0)});if(!b)throw new TypeError("Reduce of empty array with no initial value");return h};c.reduceRight=c.foldr=function(a,g,h,n){var b=2<arguments.length;null==a&&(a=[]);if(k&&a.reduceRight===k)return n&&(g=c.bind(g,n)),b?a.reduceRight(g,h):a.reduceRight(g);var d=c.toArray(a).reverse();n&&!b&&(g=c.bind(g,n));return b?c.reduce(d,g,h,n):c.reduce(d,g)};c.find=c.detect=function(a,g,c){var n;y(a,function(a,
b,d){if(g.call(c,a,b,d))return n=a,!0});return n};c.filter=c.select=function(a,c,h){var n=[];if(null==a)return n;if(D&&a.filter===D)return a.filter(c,h);u(a,function(a,b,d){c.call(h,a,b,d)&&(n[n.length]=a)});return n};c.reject=function(a,c,h){var n=[];if(null==a)return n;u(a,function(a,b,d){c.call(h,a,b,d)||(n[n.length]=a)});return n};c.every=c.all=function(a,c,h){var n=!0;if(null==a)return n;if(x&&a.every===x)return a.every(c,h);u(a,function(a,b,d){if(!(n=n&&c.call(h,a,b,d)))return w});return!!n};
var y=c.some=c.any=function(a,g,h){g||(g=c.identity);var b=!1;if(null==a)return b;if(B&&a.some===B)return a.some(g,h);u(a,function(a,c,d){if(b||(b=g.call(h,a,c,d)))return w});return!!b};c.include=c.contains=function(a,c){var h=!1;return null==a?h:I&&a.indexOf===I?-1!=a.indexOf(c):h=y(a,function(a){return a===c})};c.invoke=function(a,g){var h=f.call(arguments,2);return c.map(a,function(a){return(c.isFunction(g)?g||a:a[g]).apply(a,h)})};c.pluck=function(a,g){return c.map(a,function(a){return a[g]})};
c.max=function(a,g,h){if(!g&&c.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!g&&c.isEmpty(a))return-Infinity;var b={computed:-Infinity};u(a,function(a,c,d){c=g?g.call(h,a,c,d):a;c>=b.computed&&(b={value:a,computed:c})});return b.value};c.min=function(a,g,h){if(!g&&c.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!g&&c.isEmpty(a))return Infinity;var b={computed:Infinity};u(a,function(a,c,d){c=g?g.call(h,a,c,d):a;c<b.computed&&(b={value:a,computed:c})});return b.value};c.shuffle=
function(a){var c=[],h;u(a,function(a,b){h=Math.floor(Math.random()*(b+1));c[b]=c[h];c[h]=a});return c};c.sortBy=function(a,g,h){var b=c.isFunction(g)?g:function(a){return a[g]};return c.pluck(c.map(a,function(a,c,g){return{value:a,criteria:b.call(h,a,c,g)}}).sort(function(a,c){var g=a.criteria,h=c.criteria;return void 0===g?1:void 0===h?-1:g<h?-1:g>h?1:0}),"value")};c.groupBy=function(a,g){var h={},b=c.isFunction(g)?g:function(a){return a[g]};u(a,function(a,c){var g=b(a,c);(h[g]||(h[g]=[])).push(a)});
return h};c.sortedIndex=function(a,g,h){h||(h=c.identity);for(var b=0,d=a.length;b<d;){var k=b+d>>1;h(a[k])<h(g)?b=k+1:d=k}return b};c.toArray=function(a){return!a?[]:c.isArray(a)||c.isArguments(a)?f.call(a):a.toArray&&c.isFunction(a.toArray)?a.toArray():c.values(a)};c.size=function(a){return c.isArray(a)?a.length:c.keys(a).length};c.first=c.head=c.take=function(a,c,h){return null!=c&&!h?f.call(a,0,c):a[0]};c.initial=function(a,c,h){return f.call(a,0,a.length-(null==c||h?1:c))};c.last=function(a,
c,h){return null!=c&&!h?f.call(a,Math.max(a.length-c,0)):a[a.length-1]};c.rest=c.tail=function(a,c,h){return f.call(a,null==c||h?1:c)};c.compact=function(a){return c.filter(a,function(a){return!!a})};c.flatten=function(a,g){return c.reduce(a,function(a,b){if(c.isArray(b))return a.concat(g?b:c.flatten(b));a[a.length]=b;return a},[])};c.without=function(a){return c.difference(a,f.call(arguments,1))};c.uniq=c.unique=function(a,g,h){h=h?c.map(a,h):a;var b=[];3>a.length&&(g=!0);c.reduce(h,function(h,d,
k){if(g?c.last(h)!==d||!h.length:!c.include(h,d))h.push(d),b.push(a[k]);return h},[]);return b};c.union=function(){return c.uniq(c.flatten(arguments,!0))};c.intersection=c.intersect=function(a){var g=f.call(arguments,1);return c.filter(c.uniq(a),function(a){return c.every(g,function(g){return 0<=c.indexOf(g,a)})})};c.difference=function(a){var g=c.flatten(f.call(arguments,1),!0);return c.filter(a,function(a){return!c.include(g,a)})};c.zip=function(){for(var a=f.call(arguments),g=c.max(c.pluck(a,"length")),
h=Array(g),b=0;b<g;b++)h[b]=c.pluck(a,""+b);return h};c.indexOf=function(a,g,h){if(null==a)return-1;var b;if(h)return h=c.sortedIndex(a,g),a[h]===g?h:-1;if(I&&a.indexOf===I)return a.indexOf(g);h=0;for(b=a.length;h<b;h++)if(h in a&&a[h]===g)return h;return-1};c.lastIndexOf=function(a,c){if(null==a)return-1;if(L&&a.lastIndexOf===L)return a.lastIndexOf(c);for(var h=a.length;h--;)if(h in a&&a[h]===c)return h;return-1};c.range=function(a,c,h){1>=arguments.length&&(c=a||0,a=0);h=arguments[2]||1;for(var b=
Math.max(Math.ceil((c-a)/h),0),d=0,k=Array(b);d<b;)k[d++]=a,a+=h;return k};var z=function(){};c.bind=function(a,g){var b,d;if(a.bind===v&&v)return v.apply(a,f.call(arguments,1));if(!c.isFunction(a))throw new TypeError;d=f.call(arguments,2);return b=function(){if(!(this instanceof b))return a.apply(g,d.concat(f.call(arguments)));z.prototype=a.prototype;var c=new z,k=a.apply(c,d.concat(f.call(arguments)));return Object(k)===k?k:c}};c.bindAll=function(a){var g=f.call(arguments,1);0==g.length&&(g=c.functions(a));
u(g,function(g){a[g]=c.bind(a[g],a)});return a};c.memoize=function(a,g){var b={};g||(g=c.identity);return function(){var d=g.apply(this,arguments);return c.has(b,d)?b[d]:b[d]=a.apply(this,arguments)}};c.delay=function(a,c){var b=f.call(arguments,2);return setTimeout(function(){return a.apply(null,b)},c)};c.defer=function(a){return c.delay.apply(c,[a,1].concat(f.call(arguments,1)))};c.throttle=function(a,g){var b,d,k,e,t,l,r=c.debounce(function(){t=e=!1},g);return function(){b=this;d=arguments;k||
(k=setTimeout(function(){k=null;t&&a.apply(b,d);r()},g));e?t=!0:l=a.apply(b,d);r();e=!0;return l}};c.debounce=function(a,c,b){var d;return function(){var k=this,e=arguments;b&&!d&&a.apply(k,e);clearTimeout(d);d=setTimeout(function(){d=null;b||a.apply(k,e)},c)}};c.once=function(a){var c=!1,b;return function(){if(c)return b;c=!0;return b=a.apply(this,arguments)}};c.wrap=function(a,c){return function(){var b=[a].concat(f.call(arguments,0));return c.apply(this,b)}};c.compose=function(){var a=arguments;
return function(){for(var c=arguments,b=a.length-1;0<=b;b--)c=[a[b].apply(this,c)];return c[0]}};c.after=function(a,c){return 0>=a?c():function(){if(1>--a)return c.apply(this,arguments)}};c.keys=M||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],h;for(h in a)c.has(a,h)&&(b[b.length]=h);return b};c.values=function(a){return c.map(a,c.identity)};c.functions=c.methods=function(a){var b=[],h;for(h in a)c.isFunction(a[h])&&b.push(h);return b.sort()};c.extend=function(a){u(f.call(arguments,
1),function(c){for(var b in c)a[b]=c[b]});return a};c.pick=function(a){var b={};u(c.flatten(f.call(arguments,1)),function(c){c in a&&(b[c]=a[c])});return b};c.defaults=function(a){u(f.call(arguments,1),function(c){for(var b in c)null==a[b]&&(a[b]=c[b])});return a};c.clone=function(a){return!c.isObject(a)?a:c.isArray(a)?a.slice():c.extend({},a)};c.tap=function(a,c){c(a);return a};c.isEqual=function(a,c){return q(a,c,[])};c.isEmpty=function(a){if(null==a)return!0;if(c.isArray(a)||c.isString(a))return 0===
a.length;for(var b in a)if(c.has(a,b))return!1;return!0};c.isElement=function(a){return!!(a&&1==a.nodeType)};c.isArray=r||function(a){return"[object Array]"==b.call(a)};c.isObject=function(a){return a===Object(a)};c.isArguments=function(a){return"[object Arguments]"==b.call(a)};c.isArguments(arguments)||(c.isArguments=function(a){return!(!a||!c.has(a,"callee"))});c.isFunction=function(a){return"[object Function]"==b.call(a)};c.isString=function(a){return"[object String]"==b.call(a)};c.isNumber=function(a){return"[object Number]"==
b.call(a)};c.isFinite=function(a){return c.isNumber(a)&&isFinite(a)};c.isNaN=function(a){return a!==a};c.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==b.call(a)};c.isDate=function(a){return"[object Date]"==b.call(a)};c.isRegExp=function(a){return"[object RegExp]"==b.call(a)};c.isNull=function(a){return null===a};c.isUndefined=function(a){return void 0===a};c.has=function(a,c){return l.call(a,c)};c.noConflict=function(){e._=j;return this};c.identity=function(a){return a};c.times=
function(a,c,b){for(var d=0;d<a;d++)c.call(b,d)};c.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};c.result=function(a,b){if(null==a)return null;var d=a[b];return c.isFunction(d)?d.call(a):d};c.mixin=function(a){u(c.functions(a),function(b){var h=c[b]=a[b];F.prototype[b]=function(){var a=f.call(arguments);d.call(a,this._wrapped);return J(h.apply(c,a),this._chain)}})};var G=0;c.uniqueId=
function(a){var c=G++;return a?a+c:c};c.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/.^/,E={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},H;for(H in E)E[E[H]]=H;var N=/\\|'|\r|\n|\t|\u2028|\u2029/g,O=/\\(\\|'|r|n|t|u2028|u2029)/g,K=function(a){return a.replace(O,function(a,c){return E[c]})};c.template=function(a,b,d){d=c.defaults(d||{},c.templateSettings);a="__p+='"+a.replace(N,function(a){return"\\"+E[a]}).replace(d.escape||
A,function(a,c){return"'+\n_.escape("+K(c)+")+\n'"}).replace(d.interpolate||A,function(a,c){return"'+\n("+K(c)+")+\n'"}).replace(d.evaluate||A,function(a,c){return"';\n"+K(c)+"\n;__p+='"})+"';\n";d.variable||(a="with(obj||{}){\n"+a+"}\n");a="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+a+"return __p;\n";var k=new Function(d.variable||"obj","_",a);if(b)return k(b,c);b=function(a){return k.call(this,a,c)};b.source="function("+(d.variable||"obj")+"){\n"+a+"}";return b};
c.chain=function(a){return c(a).chain()};var F=function(a){this._wrapped=a};c.prototype=F.prototype;var J=function(a,b){return b?c(a).chain():a};c.mixin(c);u("pop push reverse shift sort splice unshift".split(" "),function(a){var c=p[a];F.prototype[a]=function(){var b=this._wrapped;c.apply(b,arguments);var d=b.length;("shift"==a||"splice"==a)&&0===d&&delete b[0];return J(b,this._chain)}});u(["concat","join","slice"],function(a){var c=p[a];F.prototype[a]=function(){return J(c.apply(this._wrapped,arguments),
this._chain)}});F.prototype.chain=function(){this._chain=!0;return this};F.prototype.value=function(){return this._wrapped}}).call(this);var Backbone=Backbone||{};
(function(){var q=[].slice,e=/\s+/,j=function(r,f,d,b){if(!d)return!0;if("object"===typeof d)for(var l in d)r[f].apply(r,[l,d[l]].concat(b));else if(e.test(d)){d=d.split(e);l=0;for(var s=d.length;l<s;l++)r[f].apply(r,[d[l]].concat(b))}else return!0},w=function(e,f,d){var b;e=-1;var l=f.length;switch(d.length){case 0:for(;++e<l;)(b=f[e]).callback.call(b.ctx);break;case 1:for(;++e<l;)(b=f[e]).callback.call(b.ctx,d[0]);break;case 2:for(;++e<l;)(b=f[e]).callback.call(b.ctx,d[0],d[1]);break;case 3:for(;++e<
l;)(b=f[e]).callback.call(b.ctx,d[0],d[1],d[2]);break;default:for(;++e<l;)(b=f[e]).callback.apply(b.ctx,d)}},p=Backbone.Events={on:function(e,f,d){if(!j(this,"on",e,[f,d])||!f)return this;this._events||(this._events={});(this._events[e]||(this._events[e]=[])).push({callback:f,context:d,ctx:d||this});return this},once:function(e,f,d){if(!j(this,"once",e,[f,d])||!f)return this;var b=this,l=_.once(function(){b.off(e,l);f.apply(this,arguments)});l._callback=f;this.on(e,l,d);return this},off:function(e,
f,d){var b,l,s,m,t,k,D,x;if(!this._events||!j(this,"off",e,[f,d]))return this;if(!e&&!f&&!d)return this._events={},this;m=e?[e]:_.keys(this._events);t=0;for(k=m.length;t<k;t++)if(e=m[t],b=this._events[e]){s=[];if(f||d){D=0;for(x=b.length;D<x;D++)l=b[D],(f&&f!==(l.callback._callback||l.callback)||d&&d!==l.context)&&s.push(l)}this._events[e]=s}return this},trigger:function(e){if(!this._events)return this;var f=q.call(arguments,1);if(!j(this,"trigger",e,f))return this;var d=this._events[e],b=this._events.all;
d&&w(this,d,f);b&&w(this,b,arguments);return this},listenTo:function(e,f,d){var b=this._listeners||(this._listeners={}),l=e._listenerId||(e._listenerId=_.uniqueId("l"));b[l]=e;e.on(f,d||this,this);return this},stopListening:function(e,f,d){var b=this._listeners;if(b){if(e)e.off(f,d,this),!f&&!d&&delete b[e._listenerId];else{for(var l in b)b[l].off(null,null,this);this._listeners={}}return this}}};p.bind=p.on;p.unbind=p.off})();(function(){for(var q=0,e=["ms","moz","webkit","o"],j=0;j<e.length&&!window.requestAnimationFrame;++j)window.requestAnimationFrame=window[e[j]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[j]+"CancelAnimationFrame"]||window[e[j]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var j=(new Date).getTime(),r=Math.max(0,16-(j-q)),f=window.setTimeout(function(){e(j+r)},r);q=j+r;return f});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(e){clearTimeout(e)})})();(function(){function q(){var b=document.body.getBoundingClientRect(),e=this.width=b.width,b=this.height=b.height;this.renderer.setSize(e,b);this.trigger(d.Events.resize,e,b)}var e=this,j=e.Two||{},w=2*Math.PI,p=Math.cos,r=Math.sin,f={hasEventListeners:_.isFunction(e.addEventListener),bind:function(b,d,e,f){this.hasEventListeners?b.addEventListener(d,e,!!f):b.attachEvent("on"+d,e);return this},unbind:function(b,d,e,f){this.hasEventListeners?b.removeEventListeners(d,e,!!f):b.detachEvent("on"+d,e);return this}},
d=e.Two=function(b){b=_.defaults(b||{},{fullscreen:!1,width:640,height:480,type:d.Types.svg,autostart:!0});this.type=b.type;this.renderer=new d[this.type](this);this.playing=b.autostart;this.frameCount=0;b.fullscreen?(b=_.bind(q,this),_.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),f.bind(window,"resize",b),b()):(this.renderer.setSize(b.width,b.height),this.width=b.width,this.height=b.height);this.scene=new d.Group;this.renderer.add(this.scene);
d.Instances.push(this)};_.extend(d,{Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Properties:{hierarchy:"hierarchy"},Events:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change"},Resolution:8,Instances:[],noConflict:function(){e.Two=j;return this}});_.extend(d.prototype,Backbone.Events,{appendTo:function(b){b.appendChild(this.renderer.domElement);return this},play:function(){this.playing=!0;return this.trigger(d.Events.play)},pause:function(){this.playing=
!1;return this.trigger(d.Events.pause)},update:function(){this.frameCount++;var b=this.width,e=this.height,f=this.renderer;(b!==f.width||e!==f.height)&&f.setSize(b,e);return this.trigger(d.Events.update,this.frameCount)},render:function(){this.renderer.render();return this.trigger(d.Events.render,this.frameCount)},makeLine:function(b,e,f,m){f=(f-b)/2;m=(m-e)/2;var t=[new d.Vector(-f,-m),new d.Vector(f,m)],t=(new d.Polygon(t)).noFill();t.translation.set(b+f,e+m);this.scene.add(t);return t},makeRectangle:function(b,
e,f,m){b=f/2;m/=2;m=[new d.Vector(b,m),new d.Vector(-b,m),new d.Vector(-b,-m),new d.Vector(b,-m)];m=new d.Polygon(m);m.translation.set(x1,y1);this.scene.add(m);return m},makeCircle:function(b,d,e){return this.makeEllipse(b,d,e,e)},makeEllipse:function(b,e,f,m){var t=d.Resolution,k=_.map(_.range(t),function(b){var e=b/t*w;b=f*p(e);e=m*r(e);return new d.Vector(b,e)},this),k=new d.Polygon(k,!0,!0);k.translation.set(b,e);this.scene.add(k);return k},makeCurve:function(b){var e=arguments.length,f=b;if(!_.isArray(b))for(var f=
[],m=0;m<e;m+=2){var t=arguments[m];if(!_.isNumber(t))break;f.push(new d.Vector(t,arguments[m+1]))}var k=Infinity,j=0,x=Infinity,B=0;_.each(f,function(b){var d=b.x;b=b.y;d<k&&(k=d);d>j&&(j=d);b<x&&(x=b);b>B&&(B=b)});var p=(j-k)/2,r=(B-x)/2;_.each(f,function(b){b.x-=p+k;b.y-=r+x});e=arguments[e-1];f=new d.Polygon(f,!(_.isBoolean(e)&&e),!0);f.translation.set(p+k,r+j);this.scene.add(f);return f},makePolygon:function(b){var e=arguments.length,f=b;if(!_.isArray(b))for(var f=[],j=0;j<e;j+=2){var t=arguments[j];
if(!_.isNumber(t))break;f.push(new d.Vector(t,arguments[j+1]))}var k=Infinity,D=0,x=Infinity,B=0;_.each(f,function(b){var d=b.x;b=b.y;d<k&&(k=d);d>D&&(D=d);b<x&&(x=b);b>B&&(B=b)});var p=(D-k)/2,r=(B-x)/2;_.each(f,function(b){b.x-=p+k;b.y-=r+x});e=arguments[e-1];f=new d.Polygon(f,!(_.isBoolean(e)&&e));f.translation.set(p+k,r+D);this.scene.add(f);return f},makeGroup:function(){var b=new d.Group(_.toArray(arguments));this.scene.add(b);return b}});(function(){_.each(d.Instances,function(b){b.playing&&
b.update().render()});requestAnimationFrame(arguments.callee)})()})();(function(){function q(b){var d={},e=b.translation,f=b.rotation,j=b.scale,l=b.stroke,p=b.linewidth,r=b.fill,q=b.opacity,c=b.visible,w=b.cap,y=b.join,z=b.miter,G=b.curved,A=b.closed,E=b.vertices;b.id&&(d.id=m.Identifier+b.id);e&&(_.isNumber(j)&&_.isNumber(f))&&(d.transform="translate("+e.x+","+e.y+") scale("+j+") rotate("+f+")");l&&(d.stroke=l);r&&(d.fill=r);q&&(d["stroke-opacity"]=d["fill-opacity"]=q);c&&(d.visibility=c?"visible":"hidden");w&&(d["stroke-linecap"]=w);y&&(d["stroke-linejoin"]=y);z&&
(d["stroke-miterlimit"]=z);p&&(d["stroke-width"]=p);E&&(d.d=s.toString(E,A,G));return d}function e(b,e){var f=b.x-e.x,j=b.y-e.y;return d(f*f+j*j)}function j(b,d){for(;0>b;)b+=d;return b%d}var w=0,p=Math.sin,r=Math.cos,f=Math.atan2,d=Math.sqrt,b=Math.PI,l=b/2,s={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",createElement:function(b,d){var e=b.toLowerCase(),f=document.createElementNS(this.ns,e);"svg"===e&&(d=_.defaults(d||{},{version:this.version}));_.isObject(d)&&
this.setAttributes(f,d);return f},setAttributes:function(b,d){_.each(d,function(b,d){this.setAttribute(d,b)},b);return this},removeAttributes:function(b,d){_.each(d,function(b){this.removeAttribute(b)},b);return this},toString:function(d,k,m){var x=d.length,B=x-1;if(!m)return _.map(d,function(c,b){var d;d=(0>=b?"M":"L")+(" "+c.x.toFixed(3)+" "+c.y.toFixed(3));b>=B&&k&&(d+=" Z");return d}).join(" ");var q=[];m=d.length;for(var w=m-1,s=0;s<m;s++){var v=d[s],v={x:v.x,y:v.y};q.push(v);var c=k?j(s-1,m):
Math.max(s-1,0),u=k?j(s+1,m):Math.min(s+1,w);var y=d[c],c=v,z=d[u],u=f(y.y-c.y,y.x-c.x),G=f(z.y-c.y,z.x-c.x),y=e(y,c),z=e(z,c),A=(u+G)/2,E=void 0,H=void 0;1E-4>y||1E-4>z?(c.u={x:c.x,y:c.y},c.v={x:c.x,y:c.y}):(y*=0.33,z*=0.33,A=G<u?A+l:A-l,E={x:c.x+r(A)*y,y:c.y+p(A)*y},A-=b,H={x:c.x+r(A)*z,y:c.y+p(A)*z},c.u=E,c.v=H);!v.u.x&&!v.u.y&&(v.u.x=v.x,v.u.y=v.y);!v.v.x&&!v.v.y&&(v.v.x=v.x,v.v.y=v.y)}return _.map(q,function(c,b){var d,e=k?j(b-1,x):Math.max(b-1,0),f=k?j(b+1,x):Math.min(b+1,B);d=q[e];var f=q[f],
e=d.v.x.toFixed(3),a=d.v.y.toFixed(3),g=c.u.x.toFixed(3),h=c.u.y.toFixed(3),m=c.x.toFixed(3),l=c.y.toFixed(3);d=0>=b?"M "+m+" "+l:"C "+e+" "+a+" "+g+" "+h+" "+m+" "+l;b>=B&&k&&(e=c.v.x.toFixed(3),a=c.v.y.toFixed(3),g=f.u.x.toFixed(3),h=f.u.y.toFixed(3),m=f.x.toFixed(3),l=f.y.toFixed(3),d=d+(" C "+e+" "+a+" "+g+" "+h+" "+m+" "+l)+" Z");return d}).join(" ")}},m=Two[Two.Types.svg]=function(b){this.two=b;this.domElement=s.createElement("svg");this.elements=[];this.commands=[]};_.extend(m,{Identifier:"two-"});
_.extend(m.prototype,Backbone.Events,{setSize:function(b,d){this.width=b;this.height=d;s.setAttributes(this.domElement,{width:b,height:d});return this},add:function(b){var d=b,e=this.elements,f=this.domElement;_.isArray(b)||(d=_.map(arguments,function(b){return b}));_.each(d,function(b){var d;_.isUndefined(b.id)&&(d=w,w++,b.id=d);b instanceof Two.Group?(d="g",_.isUndefined(b.parent)&&(b.parent=this,b.unbind(Two.Events.change).bind(Two.Events.change,_.bind(this.update,this))),b=q(b),delete b.stroke,
delete b.fill,delete b["fill-opacity"],delete b["stroke-opacity"],delete b["stroke-linecap"],delete b["stroke-linejoin"],delete b["stroke-miterlimit"],delete b["stroke-width"]):(d="path",b=q(b));b=s.createElement(d,b);f.appendChild(b);e.push(b)},this);return this},update:function(b,d,e){this.commands.push(arguments);return this},render:function(){var b=this.elements;_.each(this.commands,function(d){var e=d[1],f=d[2],j=d[3],m=d[4],l=b[d[0]];switch(e){case Two.Properties.hierarchy:_.each(f,function(d){l.appendChild(b[d])});
break;default:a:{d=e;switch(d){case "rotation":d="transform";f="translate("+j.translation.x+","+j.translation.y+") scale("+j.scale+") rotate("+f+")";break;case "scale":d="transform";f="translate("+j.translation.x+","+j.translation.y+") scale("+f+") rotate("+j.rotation+")";break;case "translation":d="transform";f="translate("+f.x+","+f.y+") scale("+j.scale+") rotate("+j.rotation+")";break;case "visible":d="visibility";f=f?"visible":"hidden";break;case "cap":d="stroke-linecap";break;case "join":d="stroke-linejoin";
break;case "miter":d="stroke-miterlimit";break;case "linewidth":d="stroke-width";break;case "vertices":d="d";f=s.toString(f,j,m);break;case "opacity":s.setAttributes(l,{"stroke-opacity":opacity,"fill-opacity":opacity});break a}l.setAttribute(d,f)}}},this);this.commands.length=0;return this}})})();(function(){var q=Two.Vector=function(e,j){e=e||0;j=j||0;Object.defineProperty(this,"x",{get:function(){return e},set:function(j){e=j;this.trigger("change","x")}});Object.defineProperty(this,"y",{get:function(){return j},set:function(e){j=e;this.trigger("change","y")}})};_.extend(q,{});_.extend(q.prototype,Backbone.Events,{set:function(e,j){this.x=e;this.y=j;return this},copy:function(e){this.x=e.x;this.y=e.y;return this},clear:function(){this.y=this.x=0;return this},clone:function(){return new q(this.x,
this.y)},add:function(e,j){this.x=e.x+j.x;this.y=e.y+j.y;return this},addSelf:function(e){this.x+=e.x;this.y+=e.y;return this},sub:function(e,j){this.x=e.x-j.x;this.y=e.y-j.y;return this},subSelf:function(e){this.x-=e.x;this.y-=e.y;return this},multiplySelf:function(e){this.x*=e.x;this.y*=e.y;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;return this},divideScalar:function(e){e?(this.x/=e,this.y/=e):this.set(0,0);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*
e.x+this.y*e.y},lengthSquared:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var j=this.x-e.x;e=this.y-e.y;return j*j+e*e},setLength:function(e){return this.normalize().multiplyScalar(e)},equals:function(e){return 1E-4>this.distanceTo(e)},lerp:function(e,j){return this.set((e.x-this.x)*
j+this.x,(e.y-this.y)*j+this.y)},isZero:function(){return 1E-4>this.length()}})})();(function(){var q=Two.Shape=function(){q.MakeGetterSetter(this,q.Properties);this.translation=new Two.Vector;this.rotation=0;this.scale=1;this.fill="#fff";this.stroke="#000";this.opacity=this.linewidth=1;this.visible=!0;this.miter=this.join=this.cap="round";this.translation.bind("change",_.bind(function(){this.trigger("change",this.id,"translation",this.translation,this)},this))};_.extend(q,{Properties:"rotation scale fill stroke linewidth opacity visible cap join miter".split(" "),MakeGetterSetter:function(e,
j){_.isArray(j)||(j=[j]);_.each(j,function(j){var p="_"+j;Object.defineProperty(e,j,{get:function(){return this[p]},set:function(e){this[p]=e;this.trigger(Two.Events.change,this.id,j,e,this)}})})}});_.extend(q.prototype,Backbone.Events,{noFill:function(){this.fill="none";return this},noStroke:function(){this.stroke="none";return this},clone:function(){var e=new q;e.translation.copy(this.translation);_.each(q.Properties,function(j){e[j]=this[j]},this);return this}})})();(function(){var q=Two.Group=function(e){Two.Shape.call(this);delete this.stroke;delete this.fill;delete this.linewidth;delete this.opacity;delete this.cap;delete this.join;delete this.miter;this.children={};_.isArray(e)?this.add(e):this.add(_.map(arguments,function(e){return e}))};_.extend(q,{});_.extend(q.prototype,Two.Shape.prototype,{add:function(e){var j=e,q=this.children,p=this.parent,r=[];_.isArray(e)||(j=_.map(arguments,function(d){return d}));var f=_.bind(function(d,b,e,f,j){this.trigger(Two.Events.change,
d,b,e,f,j)},this);_.each(j,function(d){var b=d.id,e=d.parent;_.isUndefined(b)&&(p.add(d),b=d.id);_.isUndefined(q[b])&&(e&&delete e.children[b],q[b]=d,d.parent=this,d.unbind(Two.Events.change).bind(Two.Events.change,f),r.push(b))},this);0<r.length&&this.trigger(Two.Events.change,this.id,"hierarchy",r);return this}})})();(function(){var q=Math.min,e=Math.max,j=Math.round,w=Two.Polygon=function(p,r,f){Two.Shape.call(this);r=!!r;f=!!f;var d=0,b=1,l=!1,s=_.debounce(_.bind(function(){var e,f;if(l){e=this.vertices.length;e-=1;f=j(d*e);e=j(b*e);for(p.length=0;f<e+1;f++){var k=this.vertices[f];p.push({x:k.x,y:k.y})}l=!1}this.trigger(Two.Events.change,this.id,"vertices",p,this.closed,this.curved)},this),0);Object.defineProperty(this,"closed",{get:function(){return r},set:function(b){r=!!b;s()}});Object.defineProperty(this,
"curved",{get:function(){return f},set:function(b){f=!!b;s()}});Object.defineProperty(this,"beginning",{get:function(){return d},set:function(b){d=q(e(b,0),1);l=!0;s()}});Object.defineProperty(this,"ending",{get:function(){return b},set:function(d){b=q(e(d,0),1);l=!0;s()}});this.vertices=p.slice(0);_.each(this.vertices,function(b){b.bind(Two.Events.change,s)},this)};_.extend(w,{});_.extend(w.prototype,Two.Shape.prototype,{})})();
