(function(){function q(a,g,h){if(a===g)return 0!==a||1/a==1/g;if(null==a||null==g)return a===g;a._chain&&(a=a._wrapped);g._chain&&(g=g._wrapped);if(a.isEqual&&c.isFunction(a.isEqual))return a.isEqual(g);if(g.isEqual&&c.isFunction(g.isEqual))return g.isEqual(a);var l=b.call(a);if(l!=b.call(g))return!1;switch(l){case "[object String]":return a==String(g);case "[object Number]":return a!=+a?g!=+g:0==a?1/a==1/g:a==+g;case "[object Date]":case "[object Boolean]":return+a==+g;case "[object RegExp]":return a.source==
g.source&&a.global==g.global&&a.multiline==g.multiline&&a.ignoreCase==g.ignoreCase}if("object"!=typeof a||"object"!=typeof g)return!1;for(var D=h.length;D--;)if(h[D]==a)return!0;h.push(a);var D=0,k=!0;if("[object Array]"==l){if(D=a.length,k=D==g.length)for(;D--&&(k=D in a==D in g&&q(a[D],g[D],h)););}else{if("constructor"in a!="constructor"in g||a.constructor!=g.constructor)return!1;for(var f in a)if(c.has(a,f)&&(D++,!(k=c.has(g,f)&&q(a[f],g[f],h))))break;if(k){for(f in g)if(c.has(g,f)&&!D--)break;
k=!D}}h.pop();return k}var d=this,j=d._,w={},m=Array.prototype,r=Object.prototype,e=m.slice,f=m.unshift,b=r.toString,n=r.hasOwnProperty,s=m.forEach,y=m.map,p=m.reduce,k=m.reduceRight,x=m.filter,t=m.every,C=m.some,I=m.indexOf,L=m.lastIndexOf,r=Array.isArray,M=Object.keys,v=Function.prototype.bind,c=function(a){return new F(a)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=c),exports._=c):d._=c;c.VERSION="1.3.3";var u=c.each=c.forEach=function(a,
g,h){if(null!=a)if(s&&a.forEach===s)a.forEach(g,h);else if(a.length===+a.length)for(var l=0,b=a.length;l<b&&!(l in a&&g.call(h,a[l],l,a)===w);l++);else for(l in a)if(c.has(a,l)&&g.call(h,a[l],l,a)===w)break};c.map=c.collect=function(a,g,c){var l=[];if(null==a)return l;if(y&&a.map===y)return a.map(g,c);u(a,function(a,b,k){l[l.length]=g.call(c,a,b,k)});a.length===+a.length&&(l.length=a.length);return l};c.reduce=c.foldl=c.inject=function(a,g,h,l){var b=2<arguments.length;null==a&&(a=[]);if(p&&a.reduce===
p)return l&&(g=c.bind(g,l)),b?a.reduce(g,h):a.reduce(g);u(a,function(a,c,k){b?h=g.call(l,h,a,c,k):(h=a,b=!0)});if(!b)throw new TypeError("Reduce of empty array with no initial value");return h};c.reduceRight=c.foldr=function(a,g,h,l){var b=2<arguments.length;null==a&&(a=[]);if(k&&a.reduceRight===k)return l&&(g=c.bind(g,l)),b?a.reduceRight(g,h):a.reduceRight(g);var f=c.toArray(a).reverse();l&&!b&&(g=c.bind(g,l));return b?c.reduce(f,g,h,l):c.reduce(f,g)};c.find=c.detect=function(a,g,c){var l;z(a,function(a,
b,k){if(g.call(c,a,b,k))return l=a,!0});return l};c.filter=c.select=function(a,c,h){var l=[];if(null==a)return l;if(x&&a.filter===x)return a.filter(c,h);u(a,function(a,b,k){c.call(h,a,b,k)&&(l[l.length]=a)});return l};c.reject=function(a,c,h){var l=[];if(null==a)return l;u(a,function(a,b,k){c.call(h,a,b,k)||(l[l.length]=a)});return l};c.every=c.all=function(a,c,h){var l=!0;if(null==a)return l;if(t&&a.every===t)return a.every(c,h);u(a,function(a,b,k){if(!(l=l&&c.call(h,a,b,k)))return w});return!!l};
var z=c.some=c.any=function(a,g,h){g||(g=c.identity);var l=!1;if(null==a)return l;if(C&&a.some===C)return a.some(g,h);u(a,function(a,c,b){if(l||(l=g.call(h,a,c,b)))return w});return!!l};c.include=c.contains=function(a,c){var h=!1;return null==a?h:I&&a.indexOf===I?-1!=a.indexOf(c):h=z(a,function(a){return a===c})};c.invoke=function(a,g){var h=e.call(arguments,2);return c.map(a,function(a){return(c.isFunction(g)?g||a:a[g]).apply(a,h)})};c.pluck=function(a,g){return c.map(a,function(a){return a[g]})};
c.max=function(a,g,h){if(!g&&c.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!g&&c.isEmpty(a))return-Infinity;var b={computed:-Infinity};u(a,function(a,c,k){c=g?g.call(h,a,c,k):a;c>=b.computed&&(b={value:a,computed:c})});return b.value};c.min=function(a,g,h){if(!g&&c.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!g&&c.isEmpty(a))return Infinity;var b={computed:Infinity};u(a,function(a,c,k){c=g?g.call(h,a,c,k):a;c<b.computed&&(b={value:a,computed:c})});return b.value};c.shuffle=
function(a){var c=[],h;u(a,function(a,b){h=Math.floor(Math.random()*(b+1));c[b]=c[h];c[h]=a});return c};c.sortBy=function(a,g,h){var b=c.isFunction(g)?g:function(a){return a[g]};return c.pluck(c.map(a,function(a,c,g){return{value:a,criteria:b.call(h,a,c,g)}}).sort(function(a,c){var g=a.criteria,h=c.criteria;return void 0===g?1:void 0===h?-1:g<h?-1:g>h?1:0}),"value")};c.groupBy=function(a,g){var h={},b=c.isFunction(g)?g:function(a){return a[g]};u(a,function(a,c){var g=b(a,c);(h[g]||(h[g]=[])).push(a)});
return h};c.sortedIndex=function(a,g,h){h||(h=c.identity);for(var b=0,k=a.length;b<k;){var f=b+k>>1;h(a[f])<h(g)?b=f+1:k=f}return b};c.toArray=function(a){return!a?[]:c.isArray(a)||c.isArguments(a)?e.call(a):a.toArray&&c.isFunction(a.toArray)?a.toArray():c.values(a)};c.size=function(a){return c.isArray(a)?a.length:c.keys(a).length};c.first=c.head=c.take=function(a,c,h){return null!=c&&!h?e.call(a,0,c):a[0]};c.initial=function(a,c,h){return e.call(a,0,a.length-(null==c||h?1:c))};c.last=function(a,
c,h){return null!=c&&!h?e.call(a,Math.max(a.length-c,0)):a[a.length-1]};c.rest=c.tail=function(a,c,h){return e.call(a,null==c||h?1:c)};c.compact=function(a){return c.filter(a,function(a){return!!a})};c.flatten=function(a,g){return c.reduce(a,function(a,b){if(c.isArray(b))return a.concat(g?b:c.flatten(b));a[a.length]=b;return a},[])};c.without=function(a){return c.difference(a,e.call(arguments,1))};c.uniq=c.unique=function(a,g,h){h=h?c.map(a,h):a;var b=[];3>a.length&&(g=!0);c.reduce(h,function(h,k,
f){if(g?c.last(h)!==k||!h.length:!c.include(h,k))h.push(k),b.push(a[f]);return h},[]);return b};c.union=function(){return c.uniq(c.flatten(arguments,!0))};c.intersection=c.intersect=function(a){var g=e.call(arguments,1);return c.filter(c.uniq(a),function(a){return c.every(g,function(g){return 0<=c.indexOf(g,a)})})};c.difference=function(a){var g=c.flatten(e.call(arguments,1),!0);return c.filter(a,function(a){return!c.include(g,a)})};c.zip=function(){for(var a=e.call(arguments),g=c.max(c.pluck(a,"length")),
h=Array(g),b=0;b<g;b++)h[b]=c.pluck(a,""+b);return h};c.indexOf=function(a,g,h){if(null==a)return-1;var b;if(h)return h=c.sortedIndex(a,g),a[h]===g?h:-1;if(I&&a.indexOf===I)return a.indexOf(g);h=0;for(b=a.length;h<b;h++)if(h in a&&a[h]===g)return h;return-1};c.lastIndexOf=function(a,c){if(null==a)return-1;if(L&&a.lastIndexOf===L)return a.lastIndexOf(c);for(var h=a.length;h--;)if(h in a&&a[h]===c)return h;return-1};c.range=function(a,c,h){1>=arguments.length&&(c=a||0,a=0);h=arguments[2]||1;for(var b=
Math.max(Math.ceil((c-a)/h),0),k=0,f=Array(b);k<b;)f[k++]=a,a+=h;return f};var A=function(){};c.bind=function(a,g){var h,b;if(a.bind===v&&v)return v.apply(a,e.call(arguments,1));if(!c.isFunction(a))throw new TypeError;b=e.call(arguments,2);return h=function(){if(!(this instanceof h))return a.apply(g,b.concat(e.call(arguments)));A.prototype=a.prototype;var c=new A,k=a.apply(c,b.concat(e.call(arguments)));return Object(k)===k?k:c}};c.bindAll=function(a){var g=e.call(arguments,1);0==g.length&&(g=c.functions(a));
u(g,function(g){a[g]=c.bind(a[g],a)});return a};c.memoize=function(a,g){var h={};g||(g=c.identity);return function(){var b=g.apply(this,arguments);return c.has(h,b)?h[b]:h[b]=a.apply(this,arguments)}};c.delay=function(a,c){var b=e.call(arguments,2);return setTimeout(function(){return a.apply(null,b)},c)};c.defer=function(a){return c.delay.apply(c,[a,1].concat(e.call(arguments,1)))};c.throttle=function(a,g){var b,k,f,p,d,n,r=c.debounce(function(){d=p=!1},g);return function(){b=this;k=arguments;f||
(f=setTimeout(function(){f=null;d&&a.apply(b,k);r()},g));p?d=!0:n=a.apply(b,k);r();p=!0;return n}};c.debounce=function(a,c,b){var k;return function(){var f=this,p=arguments;b&&!k&&a.apply(f,p);clearTimeout(k);k=setTimeout(function(){k=null;b||a.apply(f,p)},c)}};c.once=function(a){var c=!1,b;return function(){if(c)return b;c=!0;return b=a.apply(this,arguments)}};c.wrap=function(a,c){return function(){var b=[a].concat(e.call(arguments,0));return c.apply(this,b)}};c.compose=function(){var a=arguments;
return function(){for(var c=arguments,b=a.length-1;0<=b;b--)c=[a[b].apply(this,c)];return c[0]}};c.after=function(a,c){return 0>=a?c():function(){if(1>--a)return c.apply(this,arguments)}};c.keys=M||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],h;for(h in a)c.has(a,h)&&(b[b.length]=h);return b};c.values=function(a){return c.map(a,c.identity)};c.functions=c.methods=function(a){var b=[],h;for(h in a)c.isFunction(a[h])&&b.push(h);return b.sort()};c.extend=function(a){u(e.call(arguments,
1),function(c){for(var b in c)a[b]=c[b]});return a};c.pick=function(a){var b={};u(c.flatten(e.call(arguments,1)),function(c){c in a&&(b[c]=a[c])});return b};c.defaults=function(a){u(e.call(arguments,1),function(c){for(var b in c)null==a[b]&&(a[b]=c[b])});return a};c.clone=function(a){return!c.isObject(a)?a:c.isArray(a)?a.slice():c.extend({},a)};c.tap=function(a,c){c(a);return a};c.isEqual=function(a,c){return q(a,c,[])};c.isEmpty=function(a){if(null==a)return!0;if(c.isArray(a)||c.isString(a))return 0===
a.length;for(var b in a)if(c.has(a,b))return!1;return!0};c.isElement=function(a){return!!(a&&1==a.nodeType)};c.isArray=r||function(a){return"[object Array]"==b.call(a)};c.isObject=function(a){return a===Object(a)};c.isArguments=function(a){return"[object Arguments]"==b.call(a)};c.isArguments(arguments)||(c.isArguments=function(a){return!(!a||!c.has(a,"callee"))});c.isFunction=function(a){return"[object Function]"==b.call(a)};c.isString=function(a){return"[object String]"==b.call(a)};c.isNumber=function(a){return"[object Number]"==
b.call(a)};c.isFinite=function(a){return c.isNumber(a)&&isFinite(a)};c.isNaN=function(a){return a!==a};c.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==b.call(a)};c.isDate=function(a){return"[object Date]"==b.call(a)};c.isRegExp=function(a){return"[object RegExp]"==b.call(a)};c.isNull=function(a){return null===a};c.isUndefined=function(a){return void 0===a};c.has=function(a,c){return n.call(a,c)};c.noConflict=function(){d._=j;return this};c.identity=function(a){return a};c.times=
function(a,c,b){for(var k=0;k<a;k++)c.call(b,k)};c.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};c.result=function(a,b){if(null==a)return null;var h=a[b];return c.isFunction(h)?h.call(a):h};c.mixin=function(a){u(c.functions(a),function(b){var h=c[b]=a[b];F.prototype[b]=function(){var a=e.call(arguments);f.call(a,this._wrapped);return J(h.apply(c,a),this._chain)}})};var G=0;c.uniqueId=
function(a){var c=G++;return a?a+c:c};c.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/.^/,E={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},H;for(H in E)E[E[H]]=H;var N=/\\|'|\r|\n|\t|\u2028|\u2029/g,O=/\\(\\|'|r|n|t|u2028|u2029)/g,K=function(a){return a.replace(O,function(a,c){return E[c]})};c.template=function(a,b,k){k=c.defaults(k||{},c.templateSettings);a="__p+='"+a.replace(N,function(a){return"\\"+E[a]}).replace(k.escape||
B,function(a,c){return"'+\n_.escape("+K(c)+")+\n'"}).replace(k.interpolate||B,function(a,c){return"'+\n("+K(c)+")+\n'"}).replace(k.evaluate||B,function(a,c){return"';\n"+K(c)+"\n;__p+='"})+"';\n";k.variable||(a="with(obj||{}){\n"+a+"}\n");a="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+a+"return __p;\n";var f=new Function(k.variable||"obj","_",a);if(b)return f(b,c);b=function(a){return f.call(this,a,c)};b.source="function("+(k.variable||"obj")+"){\n"+a+"}";return b};
c.chain=function(a){return c(a).chain()};var F=function(a){this._wrapped=a};c.prototype=F.prototype;var J=function(a,b){return b?c(a).chain():a};c.mixin(c);u("pop push reverse shift sort splice unshift".split(" "),function(a){var c=m[a];F.prototype[a]=function(){var b=this._wrapped;c.apply(b,arguments);var k=b.length;("shift"==a||"splice"==a)&&0===k&&delete b[0];return J(b,this._chain)}});u(["concat","join","slice"],function(a){var c=m[a];F.prototype[a]=function(){return J(c.apply(this._wrapped,arguments),
this._chain)}});F.prototype.chain=function(){this._chain=!0;return this};F.prototype.value=function(){return this._wrapped}}).call(this);var Backbone=Backbone||{};
(function(){var q=[].slice,d=/\s+/,j=function(r,e,f,b){if(!f)return!0;if("object"===typeof f)for(var n in f)r[e].apply(r,[n,f[n]].concat(b));else if(d.test(f)){f=f.split(d);n=0;for(var s=f.length;n<s;n++)r[e].apply(r,[f[n]].concat(b))}else return!0},w=function(d,e,f){var b;d=-1;var n=e.length;switch(f.length){case 0:for(;++d<n;)(b=e[d]).callback.call(b.ctx);break;case 1:for(;++d<n;)(b=e[d]).callback.call(b.ctx,f[0]);break;case 2:for(;++d<n;)(b=e[d]).callback.call(b.ctx,f[0],f[1]);break;case 3:for(;++d<
n;)(b=e[d]).callback.call(b.ctx,f[0],f[1],f[2]);break;default:for(;++d<n;)(b=e[d]).callback.apply(b.ctx,f)}},m=Backbone.Events={on:function(d,e,f){if(!j(this,"on",d,[e,f])||!e)return this;this._events||(this._events={});(this._events[d]||(this._events[d]=[])).push({callback:e,context:f,ctx:f||this});return this},once:function(d,e,f){if(!j(this,"once",d,[e,f])||!e)return this;var b=this,n=_.once(function(){b.off(d,n);e.apply(this,arguments)});n._callback=e;this.on(d,n,f);return this},off:function(d,
e,f){var b,n,s,y,p,k,x,t;if(!this._events||!j(this,"off",d,[e,f]))return this;if(!d&&!e&&!f)return this._events={},this;y=d?[d]:_.keys(this._events);p=0;for(k=y.length;p<k;p++)if(d=y[p],b=this._events[d]){s=[];if(e||f){x=0;for(t=b.length;x<t;x++)n=b[x],(e&&e!==(n.callback._callback||n.callback)||f&&f!==n.context)&&s.push(n)}this._events[d]=s}return this},trigger:function(d){if(!this._events)return this;var e=q.call(arguments,1);if(!j(this,"trigger",d,e))return this;var f=this._events[d],b=this._events.all;
f&&w(this,f,e);b&&w(this,b,arguments);return this},listenTo:function(d,e,f){var b=this._listeners||(this._listeners={}),n=d._listenerId||(d._listenerId=_.uniqueId("l"));b[n]=d;d.on(e,f||this,this);return this},stopListening:function(d,e,f){var b=this._listeners;if(b){if(d)d.off(e,f,this),!e&&!f&&delete b[d._listenerId];else{for(var n in b)b[n].off(null,null,this);this._listeners={}}return this}}};m.bind=m.on;m.unbind=m.off})();(function(){for(var q=0,d=["ms","moz","webkit","o"],j=0;j<d.length&&!window.requestAnimationFrame;++j)window.requestAnimationFrame=window[d[j]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[d[j]+"CancelAnimationFrame"]||window[d[j]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(d){var j=(new Date).getTime(),r=Math.max(0,16-(j-q)),e=window.setTimeout(function(){d(j+r)},r);q=j+r;return e});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(d){clearTimeout(d)})})();(function(){function q(){var b=document.body.getBoundingClientRect(),d=this.width=b.width,b=this.height=b.height;this.renderer.setSize(d,b);this.trigger(f.Events.resize,d,b)}var d=this,j=d.Two||{},w=2*Math.PI,m=Math.cos,r=Math.sin,e={hasEventListeners:_.isFunction(d.addEventListener),bind:function(b,d,f,e){this.hasEventListeners?b.addEventListener(d,f,!!e):b.attachEvent("on"+d,f);return this},unbind:function(b,d,f,e){this.hasEventListeners?b.removeEventListeners(d,f,!!e):b.detachEvent("on"+d,f);return this}},
f=d.Two=function(b){b=_.defaults(b||{},{fullscreen:!1,width:640,height:480,type:f.Types.svg,autostart:!0});this.type=b.type;this.renderer=new f[this.type](this);this.playing=b.autostart;this.frameCount=0;b.fullscreen?(b=_.bind(q,this),_.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),e.bind(window,"resize",b),b()):(this.renderer.setSize(b.width,b.height),this.width=b.width,this.height=b.height);this.scene=new f.Group;this.renderer.add(this.scene);
f.Instances.push(this)};_.extend(f,{Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Properties:{hierarchy:"hierarchy"},Events:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change"},Resolution:8,Instances:[],noConflict:function(){d.Two=j;return this}});_.extend(f.prototype,Backbone.Events,{appendTo:function(b){b.appendChild(this.renderer.domElement);return this},play:function(){this.playing=!0;return this.trigger(f.Events.play)},pause:function(){this.playing=
!1;return this.trigger(f.Events.pause)},update:function(){this.frameCount++;var b=this.width,d=this.height,e=this.renderer;(b!==e.width||d!==e.height)&&e.setSize(b,d);return this.trigger(f.Events.update,this.frameCount)},render:function(){this.renderer.render();return this.trigger(f.Events.render,this.frameCount)},makeLine:function(b,d,e,j){e=(e-b)/2;j=(j-d)/2;var p=[new f.Vector(-e,-j),new f.Vector(e,j)],p=(new f.Polygon(p)).noFill();p.translation.set(b+e,d+j);this.scene.add(p);return p},makeArc:function(b,
d,e,j,p){var k=p-j;p=_.map(_.range(f.Resolution),function(p){var t=p/f.Resolution*k+j;p=e*m(t)+b;t=e*r(t)+d;return new f.Vector(p,t)},this);p=new f.Polygon(p,!1,!0);p.translation.set(b,d);this.scene.add(p);return p},makeCircle:function(b,d,f){return this.makeEllipse(b,d,f,f)},makeEllipse:function(b,d,e,j){var p=f.Resolution,k=_.map(_.range(p),function(b){var d=b/p*w;b=e*m(d);d=j*r(d);return new f.Vector(b,d)},this),k=new f.Polygon(k,!0,!0);k.translation.set(b,d);this.scene.add(k);return k},makeCurve:function(b){var d=
arguments.length,e=b;if(!_.isArray(b))for(var e=[],j=0;j<d;j+=2){var p=arguments[j];if(!_.isNumber(p))break;e.push(new f.Vector(p,arguments[j+1]))}var k=Infinity,x=0,t=Infinity,C=0;_.each(e,function(b){var d=b.x;b=b.y;d<k&&(k=d);d>x&&(x=d);b<t&&(t=b);b>C&&(C=b)});var m=(x-k)/2,r=(C-t)/2;_.each(e,function(b){b.x-=m+k;b.y-=r+t});d=arguments[d-1];e=new f.Polygon(e,!(_.isBoolean(d)&&d),!0);e.translation.set(m+k,r+x);this.scene.add(e);return e},makePolygon:function(b){var d=arguments.length,e=b;if(!_.isArray(b))for(var e=
[],j=0;j<d;j+=2){var p=arguments[j];if(!_.isNumber(p))break;e.push(new f.Vector(p,arguments[j+1]))}var k=Infinity,x=0,t=Infinity,C=0;_.each(e,function(b){var d=b.x;b=b.y;d<k&&(k=d);d>x&&(x=d);b<t&&(t=b);b>C&&(C=b)});var m=(x-k)/2,r=(C-t)/2;_.each(e,function(b){b.x-=m+k;b.y-=r+t});d=arguments[d-1];e=new f.Polygon(e,!(_.isBoolean(d)&&d));e.translation.set(m+k,r+x);this.scene.add(e);return e}});(function(){_.each(f.Instances,function(b){b.playing&&b.update().render()});requestAnimationFrame(arguments.callee)})()})();(function(){function q(b){var d={},f=b.translation,e=b.rotation,j=b.scale,n=b.stroke,m=b.linewidth,r=b.fill,q=b.opacity,c=b.visible,w=b.cap,z=b.join,A=b.miter,G=b.curved,B=b.closed,E=b.vertices;b.id&&(d.id=y.Identifier+b.id);f&&(_.isNumber(j)&&_.isNumber(e))&&(d.transform="translate("+f.x+","+f.y+") scale("+j+") rotate("+e+")");n&&(d.stroke=n);r&&(d.fill=r);q&&(d["stroke-opacity"]=d["fill-opacity"]=q);c&&(d.visibility=c?"visible":"hidden");w&&(d["stroke-linecap"]=w);z&&(d["stroke-linejoin"]=z);A&&
(d["stroke-miterlimit"]=A);m&&(d["stroke-width"]=m);E&&(d.d=s.toString(E,B,G));return d}function d(b,d){var e=b.x-d.x,j=b.y-d.y;return f(e*e+j*j)}function j(b,d){for(;0>b;)b+=d;return b%d}var w=0,m=Math.sin,r=Math.cos,e=Math.atan2,f=Math.sqrt,b=Math.PI,n=b/2,s={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",createElement:function(b,d){var f=b.toLowerCase(),e=document.createElementNS(this.ns,f);"svg"===f&&(d=_.defaults(d||{},{version:this.version}));_.isObject(d)&&
this.setAttributes(e,d);return e},setAttributes:function(b,d){_.each(d,function(b,d){this.setAttribute(d,b)},b);return this},removeAttributes:function(b,d){_.each(d,function(b){this.removeAttribute(b)},b);return this},toString:function(f,k,q){var t=f.length,C=t-1;if(!q)return _.map(f,function(c,b){var d;d=(0>=b?"M":"L")+(" "+c.x.toFixed(3)+" "+c.y.toFixed(3));b>=C&&k&&(d+=" Z");return d}).join(" ");var y=[];q=f.length;for(var w=q-1,s=0;s<q;s++){var v=f[s],v={x:v.x,y:v.y};y.push(v);var c=k?j(s-1,q):
Math.max(s-1,0),u=k?j(s+1,q):Math.min(s+1,w);var z=f[c],c=v,A=f[u],u=e(z.y-c.y,z.x-c.x),G=e(A.y-c.y,A.x-c.x),z=d(z,c),A=d(A,c),B=(u+G)/2,E=void 0,H=void 0;1E-4>z||1E-4>A?(c.u={x:c.x,y:c.y},c.v={x:c.x,y:c.y}):(z*=0.33,A*=0.33,B=G<u?B+n:B-n,E={x:c.x+r(B)*z,y:c.y+m(B)*z},B-=b,H={x:c.x+r(B)*A,y:c.y+m(B)*A},c.u=E,c.v=H);!v.u.x&&!v.u.y&&(v.u.x=v.x,v.u.y=v.y);!v.v.x&&!v.v.y&&(v.v.x=v.x,v.v.y=v.y)}return _.map(y,function(c,b){var d,f=k?j(b-1,t):Math.max(b-1,0),e=k?j(b+1,t):Math.min(b+1,C);d=y[f];var e=y[e],
f=d.v.x.toFixed(3),a=d.v.y.toFixed(3),g=c.u.x.toFixed(3),h=c.u.y.toFixed(3),p=c.x.toFixed(3),n=c.y.toFixed(3);d=0>=b?"M "+p+" "+n:"C "+f+" "+a+" "+g+" "+h+" "+p+" "+n;b>=C&&k&&(f=c.v.x.toFixed(3),a=c.v.y.toFixed(3),g=e.u.x.toFixed(3),h=e.u.y.toFixed(3),p=e.x.toFixed(3),n=e.y.toFixed(3),d=d+(" C "+f+" "+a+" "+g+" "+h+" "+p+" "+n)+" Z");return d}).join(" ")}},y=Two[Two.Types.svg]=function(b){this.two=b;this.domElement=s.createElement("svg");this.elements=[];this.commands=[]};_.extend(y,{Identifier:"two-"});
_.extend(y.prototype,Backbone.Events,{setSize:function(b,d){this.width=b;this.height=d;s.setAttributes(this.domElement,{width:b,height:d});return this},add:function(b){var d=b,f=this.elements,e=this.domElement;_.isArray(b)||(d=_.map(arguments,function(b){return b}));_.each(d,function(b){var d;_.isUndefined(b.id)&&(d=w,w++,b.id=d);b instanceof Two.Group?(d="g",_.isUndefined(b.parent)&&(b.parent=this,b.unbind(Two.Events.change).bind(Two.Events.change,_.bind(this.update,this))),b=q(b),delete b.stroke,
delete b.fill,delete b["fill-opacity"],delete b["stroke-opacity"],delete b["stroke-linecap"],delete b["stroke-linejoin"],delete b["stroke-miterlimit"],delete b["stroke-width"]):(d="path",b=q(b));b=s.createElement(d,b);e.appendChild(b);f.push(b)},this);return this},update:function(b,d,f){this.commands.push(arguments);return this},render:function(){var b=this.elements;_.each(this.commands,function(d){var f=d[1],e=d[2],j=d[3],n=d[4],m=b[d[0]];switch(f){case Two.Properties.hierarchy:_.each(e,function(d){m.appendChild(b[d])});
break;default:a:{d=f;switch(d){case "rotation":d="transform";e="translate("+j.translation.x+","+j.translation.y+") scale("+j.scale+") rotate("+e+")";break;case "scale":d="transform";e="translate("+j.translation.x+","+j.translation.y+") scale("+e+") rotate("+j.rotation+")";break;case "translation":d="transform";e="translate("+e.x+","+e.y+") scale("+j.scale+") rotate("+j.rotation+")";break;case "visible":d="visibility";e=e?"visible":"hidden";break;case "cap":d="stroke-linecap";break;case "join":d="stroke-linejoin";
break;case "miter":d="stroke-miterlimit";break;case "linewidth":d="stroke-width";break;case "vertices":d="d";e=s.toString(e,j,n);break;case "opacity":s.setAttributes(m,{"stroke-opacity":opacity,"fill-opacity":opacity});break a}m.setAttribute(d,e)}}},this);this.commands.length=0;return this}})})();(function(){var q=Two.Vector=function(d,j){d=d||0;j=j||0;Object.defineProperty(this,"x",{get:function(){return d},set:function(j){d=j;this.trigger("change","x")}});Object.defineProperty(this,"y",{get:function(){return j},set:function(d){j=d;this.trigger("change","y")}})};_.extend(q,{});_.extend(q.prototype,Backbone.Events,{set:function(d,j){this.x=d;this.y=j;return this},copy:function(d){this.x=d.x;this.y=d.y;return this},clear:function(){this.y=this.x=0;return this},clone:function(){return new q(this.x,
this.y)},add:function(d,j){this.x=d.x+j.x;this.y=d.y+j.y;return this},addSelf:function(d){this.x+=d.x;this.y+=d.y;return this},sub:function(d,j){this.x=d.x-j.x;this.y=d.y-j.y;return this},subSelf:function(d){this.x-=d.x;this.y-=d.y;return this},multiplySelf:function(d){this.x*=d.x;this.y*=d.y;return this},multiplyScalar:function(d){this.x*=d;this.y*=d;return this},divideScalar:function(d){d?(this.x/=d,this.y/=d):this.set(0,0);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(d){return this.x*
d.x+this.y*d.y},lengthSquared:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(d){return Math.sqrt(this.distanceToSquared(d))},distanceToSquared:function(d){var j=this.x-d.x;d=this.y-d.y;return j*j+d*d},setLength:function(d){return this.normalize().multiplyScalar(d)},equals:function(d){return 1E-4>this.distanceTo(d)},lerp:function(d,j){return this.set((d.x-this.x)*
j+this.x,(d.y-this.y)*j+this.y)},isZero:function(){return 1E-4>this.length()}})})();(function(){var q=Two.Shape=function(){q.MakeGetterSetter(this,q.Properties);this.translation=new Two.Vector;this.rotation=0;this.scale=1;this.fill="#fff";this.stroke="#000";this.opacity=this.linewidth=1;this.visible=!0;this.miter=this.join=this.cap="round";this.translation.bind("change",_.bind(function(){this.trigger("change",this.id,"translation",this.translation,this)},this))};_.extend(q,{Properties:"rotation scale fill stroke linewidth opacity visible cap join miter".split(" "),MakeGetterSetter:function(d,
j){_.isArray(j)||(j=[j]);_.each(j,function(j){var m="_"+j;Object.defineProperty(d,j,{get:function(){return this[m]},set:function(d){this[m]=d;this.trigger(Two.Events.change,this.id,j,d,this)}})})}});_.extend(q.prototype,Backbone.Events,{noFill:function(){this.fill="none";return this},noStroke:function(){this.stroke="none";return this},clone:function(){var d=new q;d.translation.copy(this.translation);_.each(q.Properties,function(j){d[j]=this[j]},this);return this}})})();(function(){var q=Two.Group=function(d){Two.Shape.call(this);delete this.stroke;delete this.fill;delete this.linewidth;delete this.opacity;delete this.cap;delete this.join;delete this.miter;this.children={};_.isArray(d)?this.add(d):this.add(_.map(arguments,function(d){return d}))};_.extend(q,{});_.extend(q.prototype,Two.Shape.prototype,{add:function(d){var j=d,q=this.children,m=this.parent,r=[];_.isArray(d)||(j=_.map(arguments,function(d){return d}));var e=_.bind(function(d,b,e,j,m){this.trigger(Two.Events.change,
d,b,e,j,m)},this);_.each(j,function(d){var b=d.id,j=d.parent;_.isUndefined(b)&&(m.add(d),b=d.id);_.isUndefined(q[b])&&(j&&delete j.children[b],q[b]=d,d.parent=this,d.unbind(Two.Events.change).bind(Two.Events.change,e),r.push(b))},this);0<r.length&&this.trigger(Two.Events.change,this.id,"hierarchy",r);return this}})})();(function(){var q=Math.min,d=Math.max,j=Math.round,w=Two.Polygon=function(m,r,e){Two.Shape.call(this);r=!!r;e=!!e;var f=0,b=1,n=!1,s=_.debounce(_.bind(function(){var d,e;if(n){d=this.vertices.length;d-=1;e=j(f*d);d=j(b*d);for(m.length=0;e<d+1;e++){var k=this.vertices[e];m.push({x:k.x,y:k.y})}n=!1}this.trigger(Two.Events.change,this.id,"vertices",m,this.closed,this.curved)},this),0);Object.defineProperty(this,"closed",{get:function(){return r},set:function(b){r=!!b;s()}});Object.defineProperty(this,
"curved",{get:function(){return e},set:function(b){e=!!b;s()}});Object.defineProperty(this,"beginning",{get:function(){return f},set:function(b){f=q(d(b,0),1);n=!0;s()}});Object.defineProperty(this,"ending",{get:function(){return b},set:function(e){b=q(d(e,0),1);n=!0;s()}});this.vertices=m.slice(0);_.each(this.vertices,function(b){b.bind(Two.Events.change,s)},this)};_.extend(w,{});_.extend(w.prototype,Two.Shape.prototype,{})})();
