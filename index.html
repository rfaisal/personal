<!doctype html>
<html>
  <head>
    <title>A Cross Context 2D Drawing API</title>
  </head>
  <body>
    <div style="top: 0; left: 0; z-index: -1; position: fixed; width: 50%; height: 100%; border: 1px solid #ccc;"></div>
    <div style="top: 0; left: 0; z-index: -1; position: fixed; width: 100%; height: 50%; border: 1px solid #ccc;"></div>
    <script type="text/javascript" src="./third-party/Three.js/build/three.js"></script>
    <script type="text/javascript" src="./third-party/underscore.js"></script>
    <script type="text/javascript" src="./deedee.js"></script>
    <script type="text/javascript">

      DD.start();

      var frames = 0;
      var dd = new DD({
        type: DD.TYPES.webgl,
        fullscreen: true
      }).appendTo(document.body);

      var rectangle = dd.addRectangle(dd.width / 2, dd.height / 2, 50 ,50);
      var ellipse = dd.addEllipse(dd.width / 2, dd.height / 2 + 100, 25, 10);
      var circle = dd.addCircle(dd.width / 2, dd.height / 2 + 50, 25);
      var line = dd.addLine(dd.width / 2 - 25, dd.height / 2 - 75, dd.width / 2 + 25, dd.height / 2 - 25)
      var poly = dd.addPolygon(
        dd.width / 2, dd.height / 2 - 125,
        dd.width / 2 + 25, dd.height / 2 - 75,
        dd.width / 2 - 25, dd.height / 2 - 75
      );

      dd
        .onResize(function(width, height) {

          rectangle.translate(width / 2, height / 2);
          circle.translate(width / 2, height / 2 + 50);
          line.translate(width / 2 - 25, height / 2 - 75);
          poly.translate(width / 2, height / 2 - 125);

        })
        .draw(function() {

          line.rotate(Date.now() / (Math.PI * 12.0));

          circle.scale(1.5 * Math.sin(frames / (Math.PI * 4.0)) + 1);
          ellipse.scale(1.5 * Math.sin(frames / (Math.PI * 4.0)) + 1);

          frames++;

        });

      poly.stroke(1, 0, 0);
      circle.stroke(0).fill(0).strokeWeight(4);
      rectangle.stroke(0, 1, 0).strokeWeight(4);
      ellipse.noStroke().fill(.75, .75, .75);

      window.addEventListener('mousemove', function(e) {

        var x = e.pageX;
        var y = e.pageY;

        rectangle.rotate((x / dd.width) * Math.PI * 2.0);
        poly.rotate((y / dd.height) * Math.PI * 2.0);
        line.strokeWeight((1 - (x * y) / (dd.width * dd.height)) * 10);
        circle.fill((x * y) / (dd.width * dd.height), 0, 0, 1.0);

      });

    </script>
  </body>
</html>